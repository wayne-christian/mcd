<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Week 8: DATABASE SYSTEMS CMP2060M</title>
<link rel="stylesheet" href="css/reveal.css">
<link rel="stylesheet" href="css/theme/night.css">

<!-- Theme used for syntax highlighting of code -->
<link rel="stylesheet" href="lib/css/zenburn.css">
<link rel="stylesheet" href="css/custom.css">

<!-- Printing and PDF exports -->
<script>
var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
document.getElementsByTagName( 'head' )[0].appendChild( link );
</script>
</head>
<body>
<div class="reveal">
  <div class="slides">
    <section data-background-transition="convex" data-background="#333333">
      <h2 >Hello</h2>
      <p style="color:#F8AA00">(DATABASE SYSTEMS CMP2060M)</p>
    </section>
    <section data-background-transition="convex" data-background-video="assets/week7/rainingcode.mp4" data-background-video-loop="loop">
      <h3 >Wayne Christian</h3>
      <p style="color:#F8AA00">Designer, Developer, Director & Senior Lecturer</p>
    </section>
    <section data-menu-title="intro1" data-background="#3f3f3f">
      <p>A <strong>SQL query </strong>walks into a bar and sees two tables. <br>
        He walks up to them and asks, "Can I join you?"</p>
    </section>
    <section data-background="assets/week7/RightCloud-10.jpg" data-background-size="cover" data-background-color="#fff">
		<h2><span class="dark-back">Standard Query Language 1 – Data Definition Language (DDL)</span></h2>
		<p><span class="dark-back">AKA: Ess-cue-ell</span></p>
		<p><span class="dark-back">AKA: Sequel</span></p>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/cow-dancing.gif" data-background-size="300px" >
      <h3>Recap</h3>
    </section>
    <section data-background-transition="convex" data-background="">
  
      <p >Last week we</p>
      <p class="fragment tight bullet" style="">Setup a cloud space on the <strong>Google Cloud Platform</strong></p>
      <p class="fragment tight bullet" style="">Deployed and configured your <strong>Bitnami LAMP</strong> stack with <strong>MySQL</strong></p>
      <p class="fragment tight bullet" style="">Enabled remote access to <strong>PHPMyAdmin</strong> -Crucial task!</p>
      <p class="fragment tight bullet" style="">Uploaded and <strong>deployed</strong> a sample MySQL database - Adventureworks</p>
      <p class="fragment tight bullet" style="">If you haven’t done the above please do asap – you only do it once</p>
      <p class="fragment tight bullet" style="">You need this environment setup to do the workshop tasks and assessment work </p>
    </section>
    <section data-background-transition="convex" data-background="">
      <h3>Recap</h3>
      <p >BASIC QUERIES</p>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/simpsons.gif" data-background-size="700px" >
      <h3>Some of you!</h3>
    </section>
    <section data-background-transition="convex" data-background-video="assets/week8/sql.mp4" > </section>
    <section data-background-transition="convex" data-background="">
      <h3>Today</h3>
      <p >Standard Query Language 1 – Data Definition Language (DDL)</p>
      <p class="tight bullet" style="">MTA Databases Exam</p>
      <p class="tight bullet" style="">Assessment 2</p>
      <p class="tight bullet" style="">DDL</p>
      <p class="tight bullet" style="">Create Databases</p>
      <p class="tight bullet" style="">Create Tables</p>
      <p class="tight bullet" style="">Data Types</p>
      <p class="tight bullet" style="">Constraints</p>
    </section>
    <section >
      <h3>Where we are</h3>
      <p class=" bullet">Week 7: Intro to Cloud Storage (SQL-as-a-service)</p>
      <p class="bullet red">Week 8: Standard Query Language - Data Definition Language (create database, tables, column etc)</p>
      <p class=" bullet">Week 9: Standard Query Language - Data Manipulation Language (insert, select, delete etc. with JOIN, UNION and other relational queries)</p>
    </section>
    <section data-background-transition="convex" data-background="">
      <h3>MTA – Database Fundamentals Exam</h3>
    </section>
    <section data-menu-title="pie" data-state="pie" data-background-transition="convex" data-background="">
      <div id="container" style="min-width: 410px; height: 500px; max-width: 700px; margin: 0 auto"></div>
    </section>
    <section data-background-transition="convex" data-background="">
      <p class="bullet" tight>See week 1 slides for MTA overview</p>
      <p class="bullet" tight>Will shortly send out access codes to registered students for online materials for mock exam sits and training </p>
    </section>
    <section data-background-transition="convex" data-background="">
      <h3>MTA – Database Fundamentals Exam</h3>
      <p class="tight bullet small" style="">You must register your interest through the form or you cannot sit exam, or have access to mock exam sits and training system </p>
      <p class="tight bullet" style=""> Need to know student numbers to book labs and configure exam environment</p>
      <p class="tight bullet" style="">Will leave the register interest form open for now</p>
      <p class="tight bullet " style="">Your engagement is important as it will influence whether or not certification will be offered to students in in the future (including your third year!)</p>
    </section>
    <section data-state="salary">
      <p>Worth a whopping</p>
      <h1 style="color: #55BF3B"> £<span id="decimals" data-number="86"></span>0</h1>
    </section>
    <section data-background-transition="convex" data-background="">
      <h3>MTA – Database Fundamentals Exam</h3>
      <p class="" style="">If you want to do exam and haven’t registered interest then you can do so below: <a href="https://forms.office.com/Pages/ResponsePage.aspx?id=xEculd4FgkKDr19LRrFijxmaIn4T61JKtT9JeLKd65RUMlJDTzY4QzBGV1VHVFU5Q0xLNjBWWERCVC4u" target="_blank">MTA FORM </a> </p>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/mtl.jpg" data-background-size="cover" >
		<h3><span class="dark-back">MTA – Database Fundamentals Exam</span></h3>
		<p class="" style=""> <span class="dark-back">Revision linked to this weeks lecture and workshop, content below available on BB under the MTA Section:</span></p>
		<p class="tight bullet" style=""><span class="dark-back">Study Textbook Lessons 1 and 2</span></p>
		<p class="tight bullet" style=""><span class="dark-back">Study Guide Chapters 1 and 2</span></p>
    </section>
    <section data-background-transition="convex" data-background="">
      <h3>Standard Query Language (SQL)</h3>
      <p class="bullet" tight>See week 1 slides for MTA overview</p>
      <p class="bullet" tight>Derek will shortly send out access codes to registered students for online materials for mock exam sits and training </p>
    </section>
    <section data-background-transition="convex"  data-background-size="cover" >
      <h3>Assessment 2</h3>
      <p class="" style="">Assessment 2 will has been released today</p>
      <p>In short: You must implement your final database solution, via an SQL script, using the MySQL database platform and associated
        tooling. </p>
      <p>you will develop a fully-functional SQL script file with the .sql extension. Upon execution,
        the .sql script must create your database structure using MySQL DDL statements with all required tables and integrity
        constraints</p>
      <p class="small">I will spend 30 mins at the start of each workshop to go through the assessment documents via a presentation and open discussion afterwards</p>
    </section>
    <section data-background-transition="convex" data-background="">
      <h3>ACRONYMS!</h3>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/ddl.jpg" data-background-size="cover">
		<h3><span class="dark-back">RDMS</span></h3>
		<p class="bullet" tight><span class="dark-back">Relational Database Management System</span></p>
		<p class="small"><span class="dark-back">in this case MYSQL</span></p>
		<p class="small"><span class="dark-back">AKA: "My Ess Que Ell"  (not "my sequel")</span></p>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/ddl.jpg" data-background-size="cover">
		<h3><span class="dark-back">DDL (Data Definition Language)</span></h3>
		<p class="bullet" tight><span class="dark-back">Create Database Schemas & Tables</span></p>
		<p class="bullet" tight><span class="dark-back">Create data Types</span></p>
		<p class="bullet" tight><span class="dark-back">Create Constraints</span></p>
		<p class="bullet" tight><span class="dark-back">DROP and ALTER Commands</span></p>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/ddl.jpg" data-background-size="cover">
		<h3><span class="dark-back">DML (Data Manipulation Language)</span></h3>
		<p><span class="dark-back">Basic Queries in SQL to manipulate stored data</span></p>
		<p class="small"><span class="dark-back">You will use both DDL & DML for the workshop tasks and assessment 2<br/>
			<strong>Focus on DDL this week</strong></span></p>
    </section>
    <section data-background-transition="convex" data-background="">
      <h3>Standard Query Language (SQL)</h3>
      <p>AKA: Ess-cue-ell or Sequel</p>
      <p class="bullet" tight> It provides a high level declarative language interface</p>
      <p class="bullet" tight>The user only specifies what they want the SQL result to be, leaving the RDMS to execute your query</p>
      <p class="bullet" tight>Components: DDL & DML as previous slide </p>
    </section>
    <section data-background-transition="convex" data-background="">
      <h3>declarative language interface</h3>
      <p>"In computer science, declarative programming is a programming paradigm—a style of building the structure and elements of computer programs—that expresses the logic of a computation without describing its control flow.</p>
    </section>
    <section>
      <p>Simply put - it greatly simplifies writing!</p>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/rtcwz.jpg" data-background-size="contain">
      <p><span style="background-color: black"> If your SQL statements are huge then you are probably doing it wrong.<br/>
        Optimise, and optimise again</span></p>
    </section>
    <section data-background-transition="convex" data-background="#3f3f3f">
      <h3>SQL DDL Statements – Create Database</h3>
      <p class="bullet" tight>Create a schema - a new database</p>
      <p class="bullet" tight>Schema elements can include tables, constraints</p>
      <pre><code data-trim data-noescape>
CREATE DATABASE databasename;
CREATE DATABASE testdb;
</code></pre>
    </section>
    <section data-background-video="https://assets.awwwards.com/awards/external/2017/08/598ed34370517.mp4">
      <h3>DEMO Create Database</h3>
    </section>
    <section data-background-transition="convex" data-background="#3f3f3f">
      <p class="small">Create a table in your database</p>
      <pre><code data-trim data-noescape>
 CREATE TABLE table_name (
    column1 datatype,
    column2 datatype,
    column3 datatype
);
</code></pre>
    </section>
    <section data-background-transition="convex" data-background="#3f3f3f">
      <p class="small">Create a table in your database with not Null</p>
      <pre><code data-trim data-noescape>
 CREATE TABLE table_name (
    column1 datatype NOT NULL,
    column2 datatype NOT NULL,
    column3 datatype NOT NULL
);

</code></pre>
    </section>
    <section>
      <p>By default, a column can hold NULL values. The NOT NULL constraint enforces a column to NOT accept NULL values.<br/>
        This enforces a field to always contain a value, which means that you cannot insert a new record, or update a record without adding a value to this field.</p>
      <a href="https://blog.jooq.org/2014/11/11/have-you-ever-wondered-about-the-difference-between-not-null-and-default/" target="_blank">More info</a> </section>
    <section data-background-transition="convex" data-background="#3f3f3f">
      <p class="small">Full create table example using multiple datatypes and constraints: </p>
      <pre><code data-trim data-noescape>
 CREATE TABLE Persons (
 PersonID int NOT NULL,
 LastName varchar(255) NOT NULL,
 FirstName varchar(255) NOT NULL,
 Address varchar(255) NOT NULL,
 City varchar(255) NOT NULL);

</code></pre>
    </section>
    <section>
      <p>MySql DATA TYPES: Each column in a database table is required to have a name and a data type. You must decide what type of data that will be stored inside each column when creating a table.</p>
      <p class="small fragment">Why?</p>
    </section>
    <section>
      <p>MySQL CONSTRAINTS are used to limit the type of data that can be inserted into a table.</p>
    </section>
    <section>
      <h3>Data types</h3>
      <p class="tight" ><strong>Numeric</strong></p>
      <p class="bullet tight" >Integer numbers: INTEGER or INT, SMALLINT</p>
      <p class="bullet tight" >Real numbers:	FLOAT, REAL, DOUBLE PRECISION</p>
      <p class="tight" ><strong>Character-string</strong></p>
      <p class="bullet tight" >Fixed-length: CHAR(n) or CHARACTER(n)</p>
      <p class="bullet tight" >Varying length: VARCHAR(n) or CHAR VARYING(n)</p>
      <p class="tight" ><strong>Date</strong></p>
      <p class="bullet tight" >YYYY-MM-DD</p>
      <p class="tight" ><strong>Time</strong></p>
      <p class="bullet tight" >HH:MM:SS</p>
    </section>
    <section data-menu-title="html5 common tags" data-background-iframe="https://dev.mysql.com/doc/refman/5.7/en/data-type-overview.html" data-background-interactive>
      <p class="small tight"><a href="https://dev.mysql.com/doc/refman/5.7/en/data-type-overview.html ">More Info</a></p>
    </section>
    <section data-menu-title="html5 common tags" data-background-iframe="https://www.w3schools.com/sql/sql_datatypes.asp" data-background-interactive>
      <p class="small tight"><a href="https://www.w3schools.com/sql/sql_datatypes.asp">More Info</a></p>
    </section>
    <section>
      <h3>MySQL CONSTRAINTS</h3>
      <p class="tight" ><strong>NOT NULL </strong></p>
      <p class="bullet tight" >specifies that an attribute cannot contain null values, It should be specified for all primary keys </p>
      <p class="tight" ><strong>DEFAULT</strong></p>
      <p class="bullet tight" >set a default value when there is no value given</p>
      <p class="tight" ><strong>PRIMARY KEY</strong></p>
      <p class="bullet tight" >specifies a column(s) as the table’s primary key</p>
      <p class="tight" ><strong>UNIQUE</strong></p>
      <p class="bullet tight" >specifies a candidate key with unique values</p>
      <p class="tight" ><strong>FOREIGN KEY</strong></p>
      <p class="bullet tight" >specifies column(s) as the foreign key in a <strong>referential constraint</strong></p>
    </section>
    <section>
      <p>In the context of relational databases, a foreign key is a field (or collection of fields) in one table that uniquely identifies a row of another table or the same table. <strong>In simpler words</strong>, the foreign key is defined in a second table, but it refers to the primary key or a unique key in the first table.</p>
    </section>
    <section data-background-transition="convex" data-background="#3f3f3f">
      <p class="small">Full create table example using multiple datatypes and constraints: </p>
      <pre><code data-trim data-noescape>
 CREATE TABLE Persons (
 PersonID int NOT NULL,
 LastName varchar(255) NOT NULL,
 FirstName varchar(255) NOT NULL,
 Address varchar(255) NOT NULL,
 <mark>City varchar(255) NOT NULL);</mark>

</code></pre>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/foreignkey.gif" data-background-size="cover" >
		<h3><span class="dark-back">Demo 2: Create employee table</span></h3>
      <p class="small">(Animation is irrelevant!)</p>
    </section>
    <section data-background-transition="convex" data-background="#3f3f3f">
      <p>Create Table (with constraints)</p>
      <p class="small">The employee table needs a foreign key that references the primary key in the department table. Need to create the department table first, with a primary key named DNUMBER</p>
      <pre><code data-trim data-noescape>
CREATE TABLE DEPARTMENT (
DNUMBER INT NOT NULL, DESCRIPTION VARCHAR(30) NOT NULL,
PRIMARY KEY (DNUMBER));

</code></pre>
    </section>
    <section data-background-transition="convex" data-background="#3f3f3f">
      <p>Alter</p>
      <p class="small">Can then alter the employee table by adding a foreign key that references the DNUMBER primary key in the department table </p>
      <pre><code data-trim data-noescape>
ALTER TABLE EMPLOYEE 
ADD CONSTRAINT fk_department_no 
FOREIGN KEY (DNO) 
REFERENCES DEPARTMENT (DNUMBER) 
ON UPDATE CASCADE 
ON DELETE CASCADE; 

</code></pre>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/foreignkey.gif" data-background-size="cover" >
		<h3><span class="dark-back">Demo 3: Create department table and alter employee tableM</span></h3>
		<p class="small"><span class="dark-back">(Animation is irrelevant!)</span></p>
    </section>
    <section data-background-transition="convex"  >
      <h3>Constraints - Referential Triggered Actions</h3>
      <p class="small">Attached to any foreign key constraint, this ‘action’ is fired when a referential integrity constraint is violated </p>
      <p class="small bullet">Deletion of a referenced primary key</p>
      <p class="small bullet">modification of a referenced primary key value</p>
      <p class="small bullet">See diagram next</p>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/foreignkey_issue.jpg" data-background-size="contain" data-background-color="#ffffff" > </section>
    <section data-background-transition="convex"  >
      <h3>Constraints</h3>
      <p>If I attempt to delete/drop the department table (when created with the employee table) it will trigger a Referential Triggered Action:</p>
      <pre><code data-trim data-noescape>DROP TABLE DEPARTMENT</code></pre>
      <img src="assets/week8/error.png"/> </section>
    <section data-background-transition="convex"  >
      <h3>Constraints</h3>
      <p>Simplified - The MySQL Server rejects the delete/drop operation for the parent table if there is a related foreign key value in the referenced table. </p>
    </section>
    <section data-background-transition="convex"  >
      <h3>Constraints</h3>
      <p>You can specify what happens to foreign keys if the linked primary key is modified, - needs to be done during creation of the foreign key.<br/>
        During creation use ON DELETE or ON UPDATE (for MySQL) </p>
    </section>
    <section data-background-transition="convex"  >
      <h3>Constraints</h3>
      <p>The below options can be used with ON DELETE and ON UPDATE:</p>
      <p class="bullet">Cascade<br/>
        on delete: is to delete all the referencing records<br/>
        on update: is to change the value of the foreign key to the updated (new) primary key value for all referencing  records.</p>
      <p class="bullet">Set null: the value of the foreign key becomes null </p>
    </section>
    <section data-background-transition="convex" data-background="#3f3f3f">
      <p>Alter Command – Table Constraints</p>
      <p class="bullet small">Adding or dropping (ADD/DROP) table constraints</p>
      <p class="bullet small">To drop foreign keys in MySQL you must use the constraint name instead of key name </p>
      <pre><code data-trim data-noescape>

ALTER TABLE EMPLOYEE 
DROP FOREIGN KEY fk_department_no;
ALTER TABLE EMPLOYEE 
DROP KEY fk_department_no;
ALTER TABLE EMPLOYEE 
ADD CONSTRAINT fk_department_no 
FOREIGN KEY (DNO) REFERENCES DEPARTMENT (DNUMBER) 
ON UPDATE CASCADE ON DELETE CASCADE; 


</code></pre>
    </section>
    <section data-background-transition="convex" data-background="#3f3f3f">
      <p>Alter Command – Table Columns</p>
      <p class="bullet small">ALTER TABLE changes the definition of a table’s structure </p>
      <p class="bullet small">Can be used for addling, dropping or setting (ADD/DROP/SET) columns </p>
      <pre><code data-trim data-noescape>
ALTER TABLE EMPLOYEE ADD JOB CHAR (12); 
ALTER TABLE EMPLOYEE DROP JOB; 
ALTER TABLE EMPLOYEE ALTER SALARY SET DEFAULT 49999; 
</code></pre>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/foreignkey.gif" data-background-size="cover" >
		<h3><span class="dark-back">Demo 4: Alter commands for columns and constraints on employee table</span></h3>
		<p class="small"><span class="dark-back">(Animation is irrelevant!)</span></p>
    </section>
    <section data-background-transition="convex" data-background="#3f3f3f">
      <p>Full example</p>
      <pre><code data-trim data-noescape>
CREATE TABLE EMPLOYEE
(FNAME VARCHAR(15) NOT NULL,
LNAME VARCHAR(15)	NOT NULL,
SSN CHAR(9)	NOT NULL,
BDATE	DATE,	
ADDRESS VARCHAR(30),	
GENDER	CHAR,	
SALARY	DECIMAL(10, 2),	
DNO INT NOT NULL,
PRIMARY KEY(SSN),
CONSTRAINT fk_department_no FOREIGN KEY (DNO) REFERENCES DEPARTMENT (DNUMBER) 
ON UPDATE CASCADE ON DELETE CASCADE); 

</code></pre>
    </section>
    <section data-background-transition="convex" data-background="#3f3f3f">
      <p>DROP command – Delete Table*</p>
      <p class="bullet small">CASCADE: All such constraints and views that  reference the table are dropped automatically from the  schema, along with the table itself </p>
      <p class="bullet small">RESTRICT: delete that table only if it is not referenced in any constraints </p>
      <pre><code data-trim data-noescape>DROP TABLE DEPARTMENT</code></pre>
      <p class="small">* CASCADE and RESTRICT options not fully compatible with MySQL – used only for interoperability </p>
    </section>
    <section data-background-transition="convex" data-background="assets/week8/dodgy.jpg" data-background-size="cover" >
		<h3><span class="dark-back">DROP command – Delete Schema</span></h3>
      <p class="small"><span style="background-color: black">DROP SCHEMA: Be very careful with this statement! When its gone, its gone!</span> </p>
    </section>
    <section data-background-transition="convex" >
      <h3>Next Week</h3>
      <p >DML (Data Manipulation Language)</p>
      <p class="small">Basic Queries in SQL to manipulate stored data </p>
    </section>
    <section>
      <h3>Basic form of the SQL SELECT statement is:</h3>
      <p> SELECT -attribute list<br/>
        FROM -table list <br/>
        WHERE -condition ; </p>
      <p class="small">Remember the song at the beginning</p>
    </section>
       <section data-background-transition="convex" data-background="assets/week8/book.jpg" data-background-size="400px" >
      <h3>Reading</h3>
    </section>
    <section data-background="" data-background-size="cover" data-background-color="#fff">
      <h2>Opportunity!</h2>
      <p>The Computer Science Society are hosting a session on SQL/databases on Tuesday (20th) at 7pm in lab 1102 (same as the workshops).
        Focusing mainly on using SQL queries to find the data you're looking for!</p>
    </section>
       <section data-background-transition="convex" data-background-video="assets/week8/sql.mp4" > </section>
  </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> 
<script src="lib/js/head.min.js"></script> 
<script src="js/reveal.js"></script> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> 
<script src="https://code.highcharts.com/highcharts.js"></script> 
<script src="https://code.highcharts.com/highcharts-more.js"></script> 
<script src="https://code.highcharts.com/modules/solid-gauge.js"></script> 
<script src="js/themes/mypbtheme.js"></script> 
<script src="js/jquery.animateNumber.min.js"></script> 
<script src="js/main.js"></script> 
<script>
var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
document.getElementsByTagName( 'head' )[0].appendChild( link );
</script>
</body>
</html>
